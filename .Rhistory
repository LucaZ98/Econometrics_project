#fit = ugarchfit(spec=spec, data=mod$residuals)
fit
plot(ecb_action[,c(3)])
plot(ecb_action[:,c(3)])
plot(ecb_action[,3])
ecb_action
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_decisions[,c(3)])),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff(log(EURUSD)))
#fit = ugarchfit(spec=spec, data=mod$residuals)
fit
plot(ecb_decisions[,3])
plot(ecb_decisions[,3], type='l')
plot(ecb_decisions[,c(3)], type='l')
length(ecb_decisions[,c(3)], type='l')
length(ecb_decisions[,c(3)])
plot(ecb_decisions[,c(2)], type='l')
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_decisions[,c(2)])),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff(log(EURUSD)))
#fit = ugarchfit(spec=spec, data=mod$residuals)
fit
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(dummy)),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff(log(EURUSD)))
#fit = ugarchfit(spec=spec, data=mod$residuals)
fit
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(dummy)),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff((EURUSD)))
fit
fit = ugarchfit(spec=spec, data=diff(log(EURUSD)))
fit
plot(df$EURUSD_vol)
plot(df$EURUSD_vol, type='l')
acf(df$EURUSD_vol)
pacf(df$EURUSD_vol)
mod1 = auto.arima(df$EURUSD_vol)
mod1
acf(mod1$residuals)
pacf(mod1$residuals)
reg = lm(df$EURUSD_vol ~ diff(df$MRO) + diff(df$ExtRes) + diff(df$M3))
reg = lm(df$EURUSD_vol ~ c(0,diff(df$MRO)) + c(0,diff(df$ExtRes)) + c(0,diff(df$M3)))
summary(reg)
plot(reg)
shapiro.test(reg$residuals)
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
acf(mod1$residuals)
pacf(mod1$residuals)
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)])
mod1
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
acf(mod1$residuals)
pacf(mod1$residuals)
1-mod1$sigma2/var(df$EURUSD_vol)
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)])
mod1
1-mod1$sigma2/var(df$EURUSD_vol)
acf(reg$residuals)
pacf(reg$residuals)
reg = lm(df$EURUSD_vol ~ c(0,diff(df$MRO)) + c(0,diff(df$ExtRes)) + c(0,diff(df$M3)))
summary(reg)
length(dummy)
#external regressor dummy
mod2 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(dummy))
mod2
1-mod2$sigma2/var(df$EURUSD_vol)
#external regressor MRO
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
1-mod1$sigma2/var(df$EURUSD_vol)
mod0 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)])
mod0
1-mod0$sigma2/var(df$EURUSD_vol)
#external regressor MRO
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
1-mod1$sigma2/var(df$EURUSD_vol)
#external regressor dummy
mod2 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(dummy))
mod2
1-mod2$sigma2/var(df$EURUSD_vol)
#external regressor MRO
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
1-mod1$sigma2/var(df$EURUSD_vol)
reg = lm(df$EURUSD_vol ~ c(0,tail(df$EURUSD_vol, -1)) c(0,diff(df$MRO)) )
reg = lm(df$EURUSD_vol ~ c(0,tail(df$EURUSD_vol, -1)) + c(0,diff(df$MRO)) )
summary(reg)
mod1
summary(reg)
acf(reg$residuals)
acf(reg$residuals)
pacf(reg$residuals)
plot(reg)
reg = lm(df$EURUSD_vol[2:length(df$EURUSD_vol)] ~ tail(df$EURUSD_vol, -1) + diff(df$MRO) )
summary(reg)
reg = lm(df$EURUSD_vol[1:(length(df$EURUSD_vol)-1)] ~ tail(df$EURUSD_vol, -1) + diff(df$MRO) )
summary(reg)
plot(reg)
acf(reg$residuals)
pacf(reg$residuals)
reg = lm(EURUSD_vol ~ L(EURUSD_vol) + diff(MRO), data=df )
reg = dynlm(EURUSD_vol ~ L(EURUSD_vol) + diff(MRO), data=df )
reg = dynlm(EURUSD_vol ~ L(EURUSD_vol), data=df )
summary(reg)
reg = dynlm(EURUSD_vol ~ L(EURUSD_vol,1), data=df )
summary(reg)
reg = dynlm(EURUSD_vol ~ L(EURUSD_vol,-1), data=df )
summary(reg)
reg = dynlm(diff(EURUSD) ~ L(diff(EURUSD_vol),1) )
summary(reg)
reg = dynlm(diff(EURUSD) ~ L(diff(EURUSD_vol),1) )
rm(list = ls())
library("readxl")
library("lubridate")
library("ggplot2")
library("patchwork")
library("olsrr")
df = read_excel("dataset.xlsx")
df_1 = read.csv("MABMM301USM189S.csv")
df$M3_USA = df_1$MABMM301USM189S
df_1 = read.csv("DGS1.csv")
df$yieldUSA_1y = df_1$DGS1
df_1 = read.csv("DCOILWTICO.csv")
df_1 <- head(df_1, -1)
df$Petrol_USA = df_1$DCOILWTICO
inf_df = read.table("inf_rate.txt", sep = "")
inf_rate = inf_df[2:(length(inf_df)-1)]
d = c()
for (i in 1: 19)
{
d = c(d, inf_rate[20-i,])
}
d = d[10:(length(d)-9)]
d
d = as.numeric(d)
df$inf_USA = d
p1 <- ggplot(df, aes(x=Data, y=EURUSD)) +
geom_line() +
xlab("")
p2 <- ggplot(df, aes(x=Data, y=M3)) +
geom_line() +
xlab("")
p3 <- ggplot(df, aes(x=Data, y=HICP)) +
geom_line() +
xlab("")
p4 <- ggplot(df, aes(x=Data, y=MRO)) +
geom_line() +
xlab("")
p5 <- ggplot(df, aes(x=Data, y=yieldEU_1y)) +
geom_line() +
xlab("")
p6 <- ggplot(df, aes(x=Data, y=ExtRes)) +
geom_line() +
xlab("")
p7 <- ggplot(df, aes(x=Data, y=yieldUSA_1y)) +
geom_line() +
xlab("")
p8 <- ggplot(df, aes(x=Data, y=M3_USA)) +
geom_line() +
xlab("")
p9 <- ggplot(df, aes(x=Data, y=Petrol_USA)) +
geom_line() +
xlab("")
p10 <- ggplot(df, aes(x=Data, y=inf_USA)) +
geom_line() +
xlab("")
p10
p1+p2+p3+p4+p5+p6+p7+p8+p9+p10
library(urca)
summary(ur.ers(df$EURUSD, type="P-test", model="trend")) #non stat
summary(ur.ers(df$M3, type="P-test", model="trend")) #non stat
summary(ur.ers(df$HICP, type="P-test", model="trend")) #non stat
summary(ur.ers(df$MRO, type="P-test", model="trend")) #non stat
summary(ur.ers(df$yieldEU_1y, type="P-test", model="trend")) #non stat
summary(ur.ers(df$ExtRes, type="P-test", model="trend")) #al 5% e al 10% è stat, non lo è all'1%
dEURUSD = diff(df$EURUSD)
dM3 = diff(df$M3)
dHICP = diff(df$HICP)
dMRO = diff(df$MRO)
dyield = diff(df$yieldEU_1y)
dExtRes = diff(df$ExtRes)
dM3_USA = diff(df$M3_USA)
dyieldUSA = diff(df$yieldUSA_1y)
dEURUSD = diff(df$EURUSD)
dM3 = diff(df$M3)
dHICP = diff(df$HICP)
dMRO = diff(df$MRO)
dyield = diff(df$yieldEU_1y)
dExtRes = diff(df$ExtRes)
dM3_USA = diff(df$M3_USA)
dyieldUSA = diff(df$yieldUSA_1y)
yield_diff = df$yieldUSA_1y - df$yieldEU_1y
df$yield_diff = yield_diff
df$dEURUSD = c(NA, dEURUSD)
df$dM3 = c(NA, dM3)
df$dHICP = c(NA, dHICP)
df$dMRO = c(NA, dMRO)
df$dyield = c(NA, dyield)
df$dExtRes = c(NA, dExtRes)
df$dM3_USA = c(NA, dM3_USA)
df$dyieldUSA = c(NA, dyieldUSA)
df$yield_diff = yield_diff
p9 <- ggplot(df, aes(x=Data, y=yield_diff)) +
geom_line() +
xlab("")
p1+p2+p3+p4+p5+p6+p8+p9
p1 <- ggplot(df, aes(x=Data, y=dEURUSD)) +
geom_line() +
xlab("")
p2 <- ggplot(df, aes(x=Data, y=dM3)) +
geom_line() +
xlab("")
p3 <- ggplot(df, aes(x=Data, y=dHICP)) +
geom_line() +
xlab("")
p4 <- ggplot(df, aes(x=Data, y=dMRO)) +
geom_line() +
xlab("")
p5 <- ggplot(df, aes(x=Data, y=dyield)) +
geom_line() +
xlab("")
p6 <- ggplot(df, aes(x=Data, y=dExtRes)) +
geom_line() +
xlab("")
#p7 <- ggplot(df, aes(x=Data, y=dRefOp)) +
#  geom_line() +
#  xlab("")
p8 <- ggplot(df, aes(x=Data, y=EURUSD_vol)) +
geom_line() +
xlab("")
p9 <- ggplot(df, aes(x=Data, y=yield_diff)) +
geom_line() +
xlab("")
p1+p2+p3+p4+p5+p6+p8+p9
dyieldEU = diff(df$yieldEU_1y)
df$dyieldEU = c(NA, dyieldEU)
summary(ur.ers(df$dEURUSD, type="P-test", model="trend"))
summary(ur.ers(df$dM3, type="P-test", model="trend"))
summary(ur.ers(df$dHICP, type="P-test", model="trend"))
summary(ur.ers(df$dMRO, type="P-test", model="trend"))
summary(ur.ers(df$dyield, type="P-test", model="trend"))
summary(ur.ers(df$dExtRes, type="P-test", model="trend"))
summary(ur.ers(df$dRefOp, type="P-test", model="trend"))
p10 <- ggplot(df, aes(x=Data, y=dyield_diff)) +
geom_line() +
xlab("")
p1 <- ggplot(df, aes(x=Data, y=dEURUSD)) +
geom_line() +
xlab("")
p2 <- ggplot(df, aes(x=Data, y=dM3)) +
geom_line() +
xlab("")
p3 <- ggplot(df, aes(x=Data, y=dHICP)) +
geom_line() +
xlab("")
p4 <- ggplot(df, aes(x=Data, y=dMRO)) +
geom_line() +
xlab("")
p5 <- ggplot(df, aes(x=Data, y=dyieldEU)) +
geom_line() +
xlab("")
p6 <- ggplot(df, aes(x=Data, y=dExtRes)) +
geom_line() +
xlab("")
#p7 <- ggplot(df, aes(x=Data, y=dRefOp)) +
#  geom_line() +
#  xlab("")
p8 <- ggplot(df, aes(x=Data, y=EURUSD_vol)) +
geom_line() +
xlab("")
p9 <- ggplot(df, aes(x=Data, y=yield_diff)) +
geom_line() +
xlab("")
p10 <- ggplot(df, aes(x=Data, y=dyield_diff)) +
geom_line() +
xlab("")
p1+p2+p3+p4+p5+p6+p8+p9+p10
df$dyield_diff = c(NA, diff(df$yield_diff))
p10 <- ggplot(df, aes(x=Data, y=dyield_diff)) +
geom_line() +
xlab("")
p1+p2+p3+p4+p5+p6+p8+p9+p10
dinf_USA = diff(df$inf_USA)
df$dinf_USA = c(NA, dinf_USA)
p10 <- ggplot(df, aes(x=Data, y=dinf_USA)) +
geom_line() +
xlab("")
p10 <- ggplot(df, aes(x=Data, y=dyield_diff)) +
geom_line() +
xlab("")
p11 <- ggplot(df, aes(x=Data, y=dinf_USA)) +
geom_line() +
xlab("")
p1+p2+p3+p4+p5+p6+p8+p9+p10+p11
adf.test(as.matrix(df$Petrol_USA))
df.colnames
colnames(df)
dPetrol_USA = diff(df$Petrol_USA)
df$dPetrol_USA = c(NA, dPetrol_USA)
colnames(df)
reg = lm(dEURUSD ~ dM3 + dHICP + dMRO + dinf_USA + dyield_diff +dPetrol_USA, data=df)
summary(reg)
acf(reg$residuals)
pacf(reg$residuals)
shapiro.test(reg$residuals)
reg = lm(dEURUSD ~ dHICP + dinf_USA + dyield_diff +dPetrol_USA, data=df)
summary(reg)
acf(reg$residuals)
pacf(reg$residuals)
shapiro.test(reg$residuals)
library(vars)
y.VAR.IC <- VARselect(df[c("EURUSD", "M3", "yieldEU_1y", "HICP", "ExtRes", "yieldUSA_1y", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "M3", "yieldEU_1y", "HICP", "ExtRes", "yieldUSA_1y", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 2)
vecm
summary(vecm$rlm)
y.VAR.IC <- VARselect(df[c("EURUSD", "M3", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "M3", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 2)
vecm
vecm<-cajorls(y.CA, r = 1)
vecm
summary(vecm$rlm)
y.VAR.IC <- VARselect(df[c("EURUSD", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 1)
vecm
summary(vecm$rlm)
res = vecm$rlm$residuals[,1]
res
plot(res^2, type = "l")
plot(res, type = "l")
dim(vecm$rlm$residuals)
summary(vecm$rlm)
reg = lm(dEURUSD ~ dHICP + dinf_USA + dyield_diff +dPetrol_USA, data=df)
summary(reg)
reg = dynlm(dEURUSD ~ L(dHICP,1) + L(dinf_USA,1) + L(dyield_diff,1) + L(dPetrol_USA,1), data=df)
summary(reg)
reg = dynlm(dEURUSD ~ L(dM3,1) + L(dHICP,1) + L(dMRO,1) + L(dinf_USA,1) + L(dyield_diff,1) + L(dPetrol_USA,1), data=df)
summary(reg)
acf(reg$residuals)
pacf(reg$residuals)
shapiro.test(reg$residuals)
reg = dynlm(dEURUSD ~ L(dHICP,1) + L(dinf_USA,1) + L(dyield_diff,1) + L(dPetrol_USA,1), data=df)
summary(reg)
acf(reg$residuals)
pacf(reg$residuals)
shapiro.test(reg$residuals)
y.VAR.IC <- VARselect(df[c("EURUSD", "M3", "yieldEU_1y", "HICP", "ExtRes", "yieldUSA_1y", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "M3", "yieldEU_1y", "HICP", "ExtRes", "yieldUSA_1y", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 2)
vecm
summary(vecm$rlm)
y.VAR.IC <- VARselect(df[c("EURUSD", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 1)
vecm
summary(vecm$rlm)
y.VAR.IC <- VARselect(df[c("EURUSD", "M3", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="const")
nlags <- y.VAR.IC$selection
nlags
y.CA <- ca.jo(df[c("EURUSD", "M3", "yield_diff", "HICP", "ExtRes", "Petrol_USA", "inf_USA")], type="trace", ecdet = "const", spec="longrun", K=2)
summary(y.CA)
vecm<-cajorls(y.CA, r = 1)
vecm
summary(vecm$rlm)
plot(acf(df$EURUSD, 12, xlim=c(1,12)))
plot(acf(df$EURUSD, 12, type = "partial", xlim = c(1,12)))
res = vecm$rlm$residuals[,1]
plot(res^2, type = "l")
plot(res, type = "l")
shapiro.test(res)
acf(res)
pacf(res)
acf(res^2)
pacf(res^2)
plot(res^2, type = "l")
lines(df$EURUSD_vol, col='red')
plot(df$EURUSD_vol, type='l')
lines(res^2, col = "red")
len(res)
length(res)
df$EURUSD_vol_cointegration = c(NA,NA, res^2)
dummy = c(0)
for(i in 2:nrow(df))
{
if (df$MRO[i]-df$MRO[i-1]) {
d = 1
} else {
d = 0
}
dummy = c(dummy,d)
}
dummy1 = as.numeric(as.logical(diff(df$MRO)))
dumm1 = c(NA, dummy1)
length(dummy1)
length(dummy)
tail(dummy,-1) == dummy1
dummy = as.numeric(as.logical(diff(df$MRO)))
dummy = c(NA, dummy)
plot(df$MRO, type = "l")
lines(dummy, col = "green")
df$ECB_MROaction = as.data.frame(dummy)
library(dynlm)
library(FinTS)
ArchTest(res, lag = 2, demean = TRUE) # con un lag non viene significativo, boh
res_adj = c(0,0,res)
length(res_adj)
res_adj_sq = ts(res_adj^2)
mod_arch = dynlm(res_adj_sq ~ L(res_adj_sq) + L(res_adj_sq, 2))
summary(mod_arch)
spec = ugarchspec(variance.model=list(model = "eGARCH", garchOrder = c(1,1), external.regressors = as.matrix(df$ECB_MROaction)),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=res)
fit
#external_data = cbind(ecb_action, ecb_action.l1, ecb_action.l2, ecb_action.l3)
spec = ugarchspec(variance.model=list(model = "eGARCH", garchOrder = c(1,1), external.regressors = as.matrix(df$ECB_MROaction[2:length(df$ECB_MROaction)])),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
ecb_action = c(as.numeric( as.logical(diff(df$MRO))))
#external_data = cbind(ecb_action, ecb_action.l1, ecb_action.l2, ecb_action.l3)
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_action)),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=res[2:length(res)])
fit
#external_data = cbind(ecb_action, ecb_action.l1, ecb_action.l2, ecb_action.l3)
spec = ugarchspec(variance.model=list(model = "eGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_action)),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=res[2:length(res)])
fit
fit@fit$coef
fit@fit$fitted.values
mean(res)
fit
#external_data = cbind(ecb_action, ecb_action.l1, ecb_action.l2, ecb_action.l3)
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_action)),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=res[2:length(res)])
fit
library(forecast)
EURUSD = ts(df$EURUSD, frequency = 12, start=c(2004,10), end=c(2022,3))
plot(diff(log(EURUSD)), type = "l")
acf(diff(EURUSD))
pacf(diff(EURUSD))
mod = auto.arima(log(EURUSD), d=1) #modello selezionato è arima (1,1,0)
mod
summary(lm(diff(log(EURUSD)) ~ c(tail(diff(log(EURUSD)),-1),0)))#la media non è significativa quindi la toglieremo
plot(EURUSD, type='l')
lines(exp(mod$fitted), col='green')
pacf(mod$residuals)
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_action)),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff(log(EURUSD)))
fit
length(diff(log(EURUSD)))
length(diff(log(EURUSD))[2:209])
length(tail(ecb_action, -1)))
length(tail(ecb_action, -1))
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(tail(ecb_action, -1))),
distribution.model="std", mean.model=list(armaOrder=c(1,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=diff(log(EURUSD))[2:209])
fit
plot(df$EURUSD_vol, type='l')
acf(df$EURUSD_vol)
pacf(df$EURUSD_vol)
mod0 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)])
mod0
1-mod0$sigma2/var(df$EURUSD_vol)
mod1 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(diff(df$MRO)))
mod1
1-mod1$sigma2/var(df$EURUSD_vol)
mod2 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(dummy))
mod2
1-mod2$sigma2/var(df$EURUSD_vol)
#external regressor dummy MRO
mod2 = auto.arima(df$EURUSD_vol[2:length(df$EURUSD_vol)], xreg = as.matrix(ecb_action))
mod2
1-mod2$sigma2/var(df$EURUSD_vol)
acf(mod1$residuals)
pacf(mod1$residuals)
reg = dynlm(diff(EURUSD) ~ L(diff(EURUSD_vol),1) )
summary(reg)
plot(reg)
ecb_action = c(as.numeric( as.logical(diff(df$MRO))))
#external_data = cbind(ecb_action, ecb_action.l1, ecb_action.l2, ecb_action.l3)
spec = ugarchspec(variance.model=list(model = "sGARCH", garchOrder = c(1,1), external.regressors = as.matrix(ecb_action)),
distribution.model="std", mean.model=list(armaOrder=c(0,0), include.mean = FALSE))
fit = ugarchfit(spec=spec, data=res[2:length(res)])
fit
fit = ugarchfit(spec=spec, data=res[1:length(res)])
fit
# gli effetti del cambio dei tassi non si vedono minimamente nella varianza
acf(res)
pacf(res)
